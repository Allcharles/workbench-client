@use "sass:color";

@function contrast($lightness, $threshold) {
  @return hsl(0, 0%, calc((#{$lightness} - #{$threshold}) * -100));
}

@function lighten($hue, $saturation, $lightness, $offset) {
  @return hsl(#{$hue}, #{$saturation}, calc(#{$lightness} + #{$offset}));
}

@function darken($hue, $saturation, $lightness, $offset) {
  @return hsl(#{$hue}, #{$saturation}, calc(#{$lightness} - #{$offset}));
}

@mixin create-css-variable(
  $name,
  $hue,
  $saturation,
  $lightness: 50%,
  $lighter-offset: 10%,
  $lightest-offset: 25%,
  $darker-offset: 10%,
  $darkest-offset: 25%
) {
  --baw-#{$name}-hue: #{$hue};
  --baw-#{$name}-saturation: #{$saturation};
  --baw-#{$name}-lightness: #{$lightness};

  // Colour
  --baw-#{$name}: hsl(
    var(--baw-#{$name}-hue),
    var(--baw-#{$name}-saturation),
    var(--baw-#{$name}-lightness)
  );

  // Light variants
  --baw-#{$name}-lighter: #{lighten(
      var(--baw-#{$name}-hue),
      var(--baw-#{$name}-saturation),
      var(--baw-#{$name}-lightness),
      #{$lighter-offset}
    )};
  --baw-#{$name}-lightest: #{lighten(
      var(--baw-#{$name}-hue),
      var(--baw-#{$name}-saturation),
      var(--baw-#{$name}-lightness),
      #{$lightest-offset}
    )};

  // Dark variants
  --baw-#{$name}-darker: #{darken(
      var(--baw-#{$name}-hue),
      var(--baw-#{$name}-saturation),
      var(--baw-#{$name}-lightness),
      #{$darker-offset}
    )};
  --baw-#{$name}-darkest: #{darken(
      var(--baw-#{$name}-hue),
      var(--baw-#{$name}-saturation),
      var(--baw-#{$name}-lightness),
      #{$darkest-offset}
    )};

  // Contrast
  --baw-#{$name}-contrast: #{contrast(
      var(--baw-#{$name}-lightness),
      var(--baw-contrast-threshold)
    )};
}

:root {
  --baw-contrast-threshold: 60%;

  @include create-css-variable("primary", 216, 98%, 52%);
  @include create-css-variable("secondary", 208, 7%, 46%);
  @include create-css-variable("success", 152, 69%, 31%);
  @include create-css-variable("info", 190, 90%, 50%);
  @include create-css-variable("warning", 45, 100%, 51%);
  @include create-css-variable("danger", 354, 70%, 54%);
  @include create-css-variable("light", 210, 17%, 98%);
  @include create-css-variable("dark", 210, 11%, 15%);
}
